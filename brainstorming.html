<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dragon's Forge | Webtoon Idea Engine</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Pretendard:wght@400;700&display=swap');
        body { font-family: 'Pretendard', sans-serif; }
        .loading-dots:after { content: '...'; animation: dots 1.5s steps(5, end) infinite; }
        @keyframes dots { 0%, 20% { content: ''; } 40% { content: '.'; } 60% { content: '..'; } 80% { content: '...'; } }
    </style>
</head>
<body class="bg-gray-950 text-gray-100 min-h-screen">

    <nav class="p-6 border-b border-gray-800 bg-gray-900/50 backdrop-blur-md sticky top-0 z-50 flex justify-between items-center">
        <h1 class="text-2xl font-bold text-orange-500 tracking-tight">ğŸ‰ Dragon's Forge</h1>
        <div class="flex items-center space-x-3">
            <label class="text-xs font-bold text-gray-500 uppercase">Engine:</label>
            <select id="model-select" class="bg-gray-800 border border-gray-700 rounded px-3 py-1 text-sm focus:ring-2 focus:ring-orange-500 outline-none">
                <option value="gemini-1.5-flash">Gemini 1.5 Flash (ë¹ ë¦„/ì¶”ì²œ)</option>
                <option value="gemini-1.5-pro">Gemini 1.5 Pro (ê¹Šì€ ë¶„ì„)</option>
            </select>
        </div>
    </nav>

    <main class="max-w-5xl mx-auto p-8 space-y-16">
        
        <section class="space-y-6">
            <div class="flex items-center space-x-4">
                <span class="bg-orange-600 text-white px-3 py-1 rounded-full text-xs font-black">STEP 01</span>
                <h2 class="text-2xl font-bold">SCAMPER ì„œì‚¬ ë³€í™˜ê¸°</h2>
            </div>
            <p class="text-gray-400 text-sm">ì§„ë¶€í•œ í´ë¦¬ì…°ë‚˜ ì•„ì´ë””ì–´ë¥¼ ì…ë ¥í•˜ë©´ 7ê°€ì§€ ê´€ì ìœ¼ë¡œ ë¹„í‹€ì–´ë“œë¦½ë‹ˆë‹¤.</p>
            
            <div class="bg-gray-900 p-6 rounded-2xl border border-gray-800 shadow-2xl">
                <textarea id="seed-idea" class="w-full bg-black border border-gray-800 rounded-xl p-4 text-gray-200 focus:ring-2 focus:ring-orange-500 outline-none transition" rows="3" placeholder="ì˜ˆ: í‰ë²”í•œ ì •ë¹„ê³µì´ ì´ˆëŠ¥ë ¥ì„ ì–»ê²Œ ëœë‹¤ë©´?"></textarea>
                <button onclick="runScamper()" class="mt-4 w-full bg-orange-600 hover:bg-orange-500 text-white font-bold py-3 rounded-xl transition-all transform active:scale-95">ì•„ì´ë””ì–´ ë¹„í‹€ê¸° ì‹œì‘</button>
            </div>

            <div id="scamper-results" class="grid grid-cols-1 md:grid-cols-2 gap-4">
                </div>
        </section>

        <hr class="border-gray-800">

        <section class="space-y-6">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <span class="bg-blue-600 text-white px-3 py-1 rounded-full text-xs font-black">STEP 02</span>
                    <h2 class="text-2xl font-bold">6-3-5 ë¸Œë ˆì¸ë¼ì´íŒ… íšŒì˜ì‹¤</h2>
                </div>
                <button onclick="addPersona()" class="text-xs bg-gray-800 hover:bg-gray-700 px-4 py-2 rounded-lg border border-gray-700">+ ì „ë¬¸ê°€ ì¶”ê°€</button>
            </div>
            
            <div id="persona-list" class="flex flex-wrap gap-3">
                <div class="persona-tag bg-gray-900 border border-blue-900/50 p-2 px-4 rounded-xl flex items-center space-x-3">
                    <input type="text" value="ë² í…Œë‘ í¸ì§‘ì" class="bg-transparent focus:outline-none text-sm w-28 persona-name font-bold text-blue-400">
                    <button class="text-gray-600 hover:text-red-500" onclick="this.parentElement.remove()">Ã—</button>
                </div>
                <div class="persona-tag bg-gray-900 border border-blue-900/50 p-2 px-4 rounded-xl flex items-center space-x-3">
                    <input type="text" value="ì¥ë¥´ë¬¼ ì‘ê°€" class="bg-transparent focus:outline-none text-sm w-28 persona-name font-bold text-blue-400">
                    <button class="text-gray-600 hover:text-red-500" onclick="this.parentElement.remove()">Ã—</button>
                </div>
            </div>

            <div class="bg-gray-900 p-6 rounded-2xl border border-gray-800 shadow-2xl">
                <textarea id="discussion-topic" class="w-full bg-black border border-gray-800 rounded-xl p-4 text-gray-200 focus:ring-2 focus:ring-blue-600 outline-none transition" rows="2" placeholder="íšŒì˜ì— ì˜¬ë¦´ í•µì‹¬ ì†Œì¬ë¥¼ ì…ë ¥í•˜ì„¸ìš”."></textarea>
                <button onclick="runBrainwriting()" class="mt-4 w-full bg-blue-600 hover:bg-blue-500 text-white font-bold py-3 rounded-xl transition-all transform active:scale-95">ê°€ìƒ íšŒì˜ ì†Œì§‘</button>
            </div>

            <div id="brainwriting-results" class="space-y-6 relative">
                </div>
        </section>
    </main>

    <script>
        // ë°œê¸‰ë°›ì€ API í‚¤ (ë…¸ì¶œ ì£¼ì˜!)
        const apiKey = 'AIzaSyA0F7ax9n4_kF7iuZwqBldTgDlznRc8wLA';

        async function callGemini(prompt) {
            const model = document.getElementById('model-select').value;
            const url = `https://generativelanguage.googleapis.com/v1beta/models/${model}:generateContent?key=${apiKey}`;
            
            try {
                const response = await fetch(url, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ contents: [{ parts: [{ text: prompt }] }] })
                });
                const data = await response.json();
                return data.candidates[0].content.parts[0].text;
            } catch (e) {
                return "ì—ëŸ¬: API í‚¤ë¥¼ í™•ì¸í•˜ê±°ë‚˜ ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.";
            }
        }

        async function runScamper() {
            const seed = document.getElementById('seed-idea').value;
            if(!seed) return alert("ì•„ì´ë””ì–´ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”!");
            
            const container = document.getElementById('scamper-results');
            container.innerHTML = '<div class="col-span-full py-10 text-center text-orange-500 font-bold loading-dots">ëŒ€ì¥ê°„ í™”ë¡œê°€ ë‹¬ê¶ˆì§€ëŠ” ì¤‘</div>';
            
            const prompt = `ì›¹íˆ° ì‹œë‚˜ë¦¬ì˜¤ ì‘ê°€ì¸ ë‚˜ë¥¼ ìœ„í•´ '${seed}'ë¼ëŠ” ì†Œì¬ë¥¼ SCAMPER ê¸°ë²•(Substitute, Combine, Adapt, Modify, Put to other use, Eliminate, Reverse)ìœ¼ë¡œ ê°ê° 1ë¬¸ì¥ì”© ê¸°ë°œí•˜ê²Œ ë¹„í‹€ì–´ì¤˜. ì œëª© ì—†ì´ 'S: ë‚´ìš©' í˜•ì‹ìœ¼ë¡œë§Œ ëŒ€ë‹µí•´ì¤˜.`;
            
            const res = await callGemini(prompt);
            const lines = res.split('\n').filter(l => l.trim() !== '');
            
            container.innerHTML = lines.map(line => `
                <div class="bg-gray-900 p-5 rounded-xl border border-gray-800 hover:border-orange-500/50 transition shadow-lg">
                    <p class="text-gray-300 text-sm leading-relaxed">${line}</p>
                </div>
            `).join('');
        }

        function addPersona() {
            const div = document.createElement('div');
            div.className = "persona-tag bg-gray-900 border border-blue-900/50 p-2 px-4 rounded-xl flex items-center space-x-3";
            div.innerHTML = `<input type="text" value="ìƒˆ ì „ë¬¸ê°€" class="bg-transparent focus:outline-none text-sm w-28 persona-name font-bold text-blue-400"><button class="text-gray-600 hover:text-red-500" onclick="this.parentElement.remove()">Ã—</button>`;
            document.getElementById('persona-list').appendChild(div);
        }

        async function runBrainwriting() {
            const topic = document.getElementById('discussion-topic').value;
            const personas = Array.from(document.querySelectorAll('.persona-name')).map(i => i.value);
            if(!topic) return alert("íšŒì˜ ì£¼ì œë¥¼ ì…ë ¥í•˜ì„¸ìš”!");

            const container = document.getElementById('brainwriting-results');
            container.innerHTML = '';
            let history = `ì£¼ì œ: ${topic}\n`;

            for (let name of personas) {
                const card = document.createElement('div');
                card.className = "bg-gray-900 p-6 rounded-2xl border-l-4 border-blue-600 shadow-xl opacity-50";
                card.innerHTML = `<h4 class="text-blue-400 font-bold mb-2">${name}</h4><p class="text-gray-400 italic loading-dots">ë¶„ì„ ì¤‘</p>`;
                container.appendChild(card);

                const prompt = `ë‹¹ì‹ ì€ ì›¹íˆ° ì œì‘ íšŒì˜ì— ì°¸ì„í•œ '${name}'ì…ë‹ˆë‹¤. ì§€ê¸ˆê¹Œì§€ì˜ íšŒì˜ ë‚´ìš© [ ${history} ]ì„ ë°”íƒ•ìœ¼ë¡œ, ì´ ì‘í’ˆì˜ ì¬ë¯¸ë¥¼ ê·¹ëŒ€í™”í•  ìˆ˜ ìˆëŠ” êµ¬ì²´ì ì¸ ì„¤ì •ì´ë‚˜ ì•„ì´ë””ì–´ 3ê°€ì§€ë¥¼ ì œì•ˆí•˜ì„¸ìš”. ë¬´ì¡°ê±´ ì• ì‚¬ëŒì˜ ë§ì„ ë°›ì•„ì„œ ë°œì „ì‹œì¼œì•¼ í•©ë‹ˆë‹¤.`;
                
                const res = await callGemini(prompt);
                card.classList.remove('opacity-50');
                card.querySelector('p').innerHTML = res.replace(/\n/g, '<br>');
                card.querySelector('p').classList.remove('loading-dots', 'italic');
                history += `\n${name}ì˜ ì˜ê²¬: ${res}`;
            }
        }
    </script>
</body>
</html>
